# Docker Compose configuration for deploying Buoy Tracker from Docker Hub
# Usage: docker compose -f docker-compose.hub.yml up -d
#
# This file is optimized for pulling the pre-built image from Docker Hub.
# No local build requiredâ€”just create config/data/logs directories and start!

services:
  buoy-tracker:
    # Pre-built image from Docker Hub
    image: dokwerker8891/buoy-tracker:latest
    container_name: buoy-tracker
    restart: unless-stopped
    ports:
      - 5102:5102
    volumes:
      # Configuration volume - easily editable on host
      # First run will auto-initialize from templates in the image
      - ./config:/app/config
      
      # Data persistence volume - history.json and buoy tracking data
      - ./data:/app/data
      
      # Logs volume
      - ./logs:/app/logs
    environment:
      # Optional: Set environment variables for sensitive config
      # If set, these override values in config/secret.config
      - MQTT_USERNAME
      - MQTT_PASSWORD
      - MQTT_KEY
      - ALERT_SMTP_USERNAME
      - ALERT_SMTP_PASSWORD
    healthcheck:
      test: [CMD, curl, -f, http://localhost:5102/api/status]
      interval: 30s
      timeout: 5s
      retries: 3
