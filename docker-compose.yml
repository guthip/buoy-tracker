services:
  buoy-tracker:
    # Use pre-built image from Docker Hub (comment out to build locally)
    image: dokwerker8891/buoy-tracker:0.68
    # Or build from local Dockerfile (uncomment the line below)
    # build: .
    container_name: buoy-tracker
    restart: unless-stopped
    ports:
      - "5102:5102"
    volumes:
      # Configuration volume (read-only)
      - ./tracker.config:/app/tracker.config:ro
      
      # Data persistence volumes
      - ./data:/app/data
      - ./logs:/app/logs
      
      # Documentation volume (optional - serve docs from host)
      - ./docs:/app/docs:ro
    environment:
      - MQTT_USERNAME
      - MQTT_PASSWORD
      - MQTT_KEY
      - ALERT_SMTP_USERNAME
      - ALERT_SMTP_PASSWORD
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5102/api/status"]
      interval: 30s
      timeout: 5s
      retries: 3
